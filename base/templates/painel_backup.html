{% extends "layout_base.html" %}

{% block title %}Dashboard - SynapseLog{% endblock %}

{% block extra_css %}
<style>

        /* Dashboard Header */
        .dashboard-header {
            margin-bottom: 30px;
        }

        .dashboard-header h1 {
            font-size: 28px;
            margin-bottom: 8px;
        }

        .dashboard-header p {
            color: var(--text-muted);
            font-size: 14px;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .stat-icon.success { background: rgba(72, 187, 120, 0.15); }
        .stat-icon.warning { background: rgba(237, 137, 54, 0.15); }
        .stat-icon.danger { background: rgba(245, 101, 101, 0.15); }

        .stat-info {
            flex: 1;
        }

        .stat-label {
            font-size: 13px;
            color: var(--text-muted);
            margin-bottom: 6px;
        }

        .stat-value {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .stat-change {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 6px;
            display: inline-block;
        }

        .stat-change.positive {
            background: rgba(72, 187, 120, 0.15);
            color: var(--success);
        }

        .stat-change.negative {
            background: rgba(245, 101, 101, 0.15);
            color: var(--danger);
        }

        /* Charts Grid */
        .charts-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-title {
            font-size: 16px;
            font-weight: 600;
        }

        .chart-subtitle {
            font-size: 13px;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .chart-filter {
            background: var(--darker-bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 6px 12px;
            color: var(--text);
            font-size: 13px;
            cursor: pointer;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        /* Secondary Charts */
        .secondary-charts {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        /* Table */
        .table-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .table-actions {
            display: flex;
            gap: 10px;
        }

        .btn-secondary {
            background: var(--darker-bg);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-secondary:hover {
            background: var(--border);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            border-bottom: 1px solid var(--border);
        }

        th {
            text-align: left;
            padding: 12px;
            font-size: 12px;
            color: var(--text-muted);
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        td {
            padding: 16px 12px;
            border-bottom: 1px solid var(--border);
            font-size: 14px;
        }

        .status-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-badge.completed {
            background: rgba(72, 187, 120, 0.15);
            color: var(--success);
        }

        .status-badge.pending {
            background: rgba(237, 137, 54, 0.15);
            color: var(--warning);
        }

        /* Floating Chat Button */
        .chat-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--accent);
            color: white;
            padding: 14px 24px;
            border-radius: 24px;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .chat-button::before {
            content: "‚óè";
            color: #48bb78;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="logo">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M13 10V3L4 14h7v7l9-11h-7z"/>
            </svg>
            SynapseLog
        </div>

        <nav class="nav-section">
            <a href="{{ url_for('main.painel') }}" class="nav-item active">
                <span>üè†</span> Home
            </a>
            <a href="{{ url_for('main.grupos') }}" class="nav-item">
                <span>üìä</span> Grupos
            </a>
            <a href="{{ url_for('main.clientes') }}" class="nav-item">
                <span>üë•</span> Clientes
            </a>
            <a href="{{ url_for('main.pontosSaida') }}" class="nav-item">
                <span>üìç</span> Pontos de Sa√≠da
            </a>
            <a href="{{ url_for('main.historicovendas') }}" class="nav-item">
                <span>üìà</span> Hist√≥rico de Vendas
            </a>
        </nav>

        <div class="nav-section-title">CONFIGURA√á√ïES</div>
        <nav class="nav-section">
            <a href="{{ url_for('main.documentacao') }}" class="nav-item">
                <span>ÔøΩ</span> Documenta√ß√£o
            </a>
            <a href="{{ url_for('main.configuracoes') }}" class="nav-item">
                <span>‚öôÔ∏è</span> Configura√ß√µes
            </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="search-bar">
                <span>üîç</span>
                <input type="text" placeholder="Search...">
            </div>
            <div class="top-bar-actions">
                <div class="icon-btn">üåô</div>
                <div class="icon-btn">üîî</div>
                <a href="{{ url_for('main.configuracoes') }}" class="icon-btn" style="text-decoration:none;">‚öôÔ∏è</a>
                <div class="user-avatar">{{ session.get('user_id', 'U')[0].upper() }}</div>
            </div>
        </div>

        <!-- Dashboard Header -->
        <div class="dashboard-header">
            <h1>Ecommerce Dashboard</h1>
            <p>Here's what's going on at your business right now</p>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon success">‚úì</div>
                <div class="stat-info">
                    <div class="stat-label">57 new orders</div>
                    <div class="stat-value">Awaiting processing</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon warning">‚è∏</div>
                <div class="stat-info">
                    <div class="stat-label">5 orders</div>
                    <div class="stat-value">On hold</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon danger">‚úï</div>
                <div class="stat-info">
                    <div class="stat-label">15 products</div>
                    <div class="stat-value">Out of stock</div>
                </div>
            </div>
        </div>

        <!-- Main Charts -->
        <div class="charts-grid">
            <div class="chart-card">
                <div class="chart-header">
                    <div>
                        <div class="chart-title">Total sells</div>
                        <div class="chart-subtitle">Payment received across all channels</div>
                    </div>
                    <select class="chart-filter">
                        <option>Mar 1 - 31, 2022</option>
                    </select>
                </div>
                <div class="chart-container">
                    <canvas id="salesChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <div>
                        <div class="chart-title">Total orders</div>
                        <div class="stat-change positive">-6.8%</div>
                        <div class="stat-value" style="margin-top: 10px;">16,247</div>
                        <div class="stat-label">Last 7 days</div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="ordersChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Secondary Charts -->
        <div class="secondary-charts">
            <div class="chart-card">
                <div class="chart-header">
                    <div>
                        <div class="chart-title">New customers</div>
                        <div class="stat-change positive">+26.5%</div>
                        <div class="stat-value" style="margin-top: 10px;">356</div>
                        <div class="stat-label">Last 7 days</div>
                    </div>
                </div>
                <div class="chart-container" style="height: 150px;">
                    <canvas id="customersChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <div>
                        <div class="chart-title">Top coupons</div>
                        <div class="stat-label">Last 7 days</div>
                    </div>
                </div>
                <div style="margin-top: 20px;">
                    <canvas id="couponsChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <div>
                        <div class="chart-title">Paying vs non paying</div>
                        <div class="stat-label">Last 7 days</div>
                    </div>
                </div>
                <div style="margin-top: 20px;">
                    <canvas id="payingChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <div>
                        <div class="chart-title">Orders completion</div>
                        <div class="stat-label">Last 7 days</div>
                    </div>
                </div>
                <div style="margin-top: 20px;">
                    <div class="stat-label">Completed <span style="float: right;">52%</span></div>
                    <div class="stat-label" style="margin-top: 10px;">Pending payment <span style="float: right;">48%</span></div>
                </div>
            </div>
        </div>

        <!-- Latest Reviews Table -->
        <div class="table-card">
            <div class="table-header">
                <div>
                    <div class="chart-title">Latest reviews</div>
                    <div class="chart-subtitle">Payment received across all channels</div>
                </div>
                <div class="table-actions">
                    <input type="text" placeholder="Search" class="search-bar" style="width: 200px;">
                    <button class="btn-secondary">All products</button>
                    <button class="btn-secondary">‚ãÆ</button>
                </div>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>PRODUCT</th>
                        <th>CUSTOMER</th>
                        <th>RATING</th>
                        <th>REVIEW</th>
                        <th>STATUS</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Product Sample A</td>
                        <td>Jo√£o Silva</td>
                        <td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td>
                        <td>Excellent product, highly recommend!</td>
                        <td><span class="status-badge completed">Completed</span></td>
                    </tr>
                    <tr>
                        <td>Product Sample B</td>
                        <td>Maria Santos</td>
                        <td>‚≠ê‚≠ê‚≠ê‚≠ê</td>
                        <td>Good quality, fast delivery</td>
                        <td><span class="status-badge pending">Pending</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>

    <!-- Floating Chat Button -->
    <div class="chat-button">Chat demo</div>

    <script>
        // Sales Chart (Line)
        const salesCtx = document.getElementById('salesChart').getContext('2d');
        new Chart(salesCtx, {
            type: 'line',
            data: {
                labels: ['01 May', '', '', '', '15 May', '', '', '', '30 May'],
                datasets: [{
                    label: 'Sales',
                    data: [30, 35, 32, 45, 60, 55, 48, 40, 50],
                    borderColor: '#667eea',
                    backgroundColor: 'rgba(102, 126, 234, 0.1)',
                    tension: 0.4,
                    fill: true,
                    borderWidth: 2
                }, {
                    label: 'Previous',
                    data: [20, 25, 30, 35, 40, 42, 38, 35, 40],
                    borderColor: '#4a5568',
                    borderDash: [5, 5],
                    tension: 0.4,
                    fill: false,
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    y: { 
                        grid: { color: '#2d3748' },
                        ticks: { color: '#a0aec0' }
                    },
                    x: { 
                        grid: { display: false },
                        ticks: { color: '#a0aec0' }
                    }
                }
            }
        });

        // Orders Chart (Bar)
        const ordersCtx = document.getElementById('ordersChart').getContext('2d');
        new Chart(ordersCtx, {
            type: 'bar',
            data: {
                labels: ['', '', '', '', '', '', ''],
                datasets: [{
                    data: [30, 45, 40, 55, 50, 45, 60],
                    backgroundColor: '#667eea',
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    y: { 
                        display: false
                    },
                    x: { 
                        display: false
                    }
                }
            }
        });

        // Customers Chart (Line)
        const customersCtx = document.getElementById('customersChart').getContext('2d');
        new Chart(customersCtx, {
            type: 'line',
            data: {
                labels: ['01 May', '', '', '', '', '', '07 May'],
                datasets: [{
                    data: [30, 28, 35, 32, 40, 45, 50],
                    borderColor: '#667eea',
                    tension: 0.4,
                    fill: false,
                    borderWidth: 3,
                    pointRadius: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    y: { display: false },
                    x: { 
                        grid: { display: false },
                        ticks: { color: '#a0aec0', font: { size: 10 } }
                    }
                }
            }
        });

        // Coupons Chart (Doughnut)
        const couponsCtx = document.getElementById('couponsChart').getContext('2d');
        new Chart(couponsCtx, {
            type: 'doughnut',
            data: {
                labels: ['Percentage discount', 'Fixed card discount', 'Fixed product discount'],
                datasets: [{
                    data: [72, 18, 10],
                    backgroundColor: ['#667eea', '#4299e1', '#48bb78'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { 
                    legend: { 
                        position: 'right',
                        labels: { color: '#a0aec0', font: { size: 12 } }
                    }
                }
            }
        });

        // Paying Chart (Doughnut)
        const payingCtx = document.getElementById('payingChart').getContext('2d');
        new Chart(payingCtx, {
            type: 'doughnut',
            data: {
                labels: ['Paying customer', 'Non-paying customer'],
                datasets: [{
                    data: [30, 70],
                    backgroundColor: ['#667eea', '#2d3748'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { 
                    legend: { 
                        position: 'right',
                        labels: { color: '#a0aec0', font: { size: 12 } }
                    }
                }
            }
        });
</script>
{% endblock %}